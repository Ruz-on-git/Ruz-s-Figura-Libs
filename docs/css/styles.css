:root {
    --bg-body: #181818;
    --bg-sidebar: #202020;
    --bg-panel: #252525;
    --bg-input: #111111;
    --border: #383838;
    --accent: #3794ff;
    --accent-hover: #1f7bec;
    --text-main: #f0f0f0;
    --text-muted: #a0a0a0;
    --danger: #ff5555;
    --danger-bg: rgba(255, 85, 85, 0.15);
}

body { margin: 0; background: var(--bg-body); color: var(--text-main); font-family: 'Segoe UI', -apple-system, sans-serif; height: 100vh; display: flex; overflow: hidden; }

/* Scrollbars */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--bg-sidebar); }
::-webkit-scrollbar-thumb { background: #444; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #555; }
::-webkit-scrollbar-corner { background: var(--bg-sidebar); }

/* Layout */
.sidebar { width: 420px; background: var(--bg-sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; box-shadow: 2px 0 15px rgba(0,0,0,0.3); z-index: 10; }
.viewport { flex: 1; position: relative; background: #0f0f0f; overflow: hidden; }

/* Tabs */
.tabs { display: flex; background: #1a1a1a; border-bottom: 1px solid var(--border); }
.tab { flex: 1; padding: 14px; text-align: center; cursor: pointer; background: transparent; color: var(--text-muted); border: none; font-weight: 600; font-size: 0.95rem; transition: all 0.2s; border-bottom: 3px solid transparent; }
.tab:hover { background: rgba(255,255,255,0.03); color: #fff; }
.tab.active { color: var(--accent); border-bottom-color: var(--accent); background: rgba(55, 148, 255, 0.05); }

/* Panels */
.panel { flex: 1; display: none; flex-direction: column; overflow-y: auto; padding: 20px; gap: 18px; }
.panel.active { display: flex; }

/* Forms */
label { font-size: 0.8rem; color: var(--text-muted); font-weight: 700; text-transform: uppercase; display: block; margin-bottom: 8px; letter-spacing: 0.5px; }
input[type="text"], input[type="number"], textarea, input[type="file"] { width: 100%; background: var(--bg-input); border: 1px solid #333; color: #fff; padding: 10px; box-sizing: border-box; border-radius: 4px; font-family: 'Consolas', monospace; font-size: 0.9em; transition: all 0.2s; }
input:focus, textarea:focus { outline: none; border-color: var(--accent); background: #1a1a1a; box-shadow: 0 0 0 1px rgba(55, 148, 255, 0.2); }
input::placeholder { color: #555; }

/* Buttons */
button { background: var(--accent); border: none; color: white; padding: 12px; border-radius: 4px; cursor: pointer; font-weight: 600; width: 100%; transition: all 0.2s; font-size: 0.9rem; letter-spacing: 0.5px; }
button:hover { background: var(--accent-hover); transform: translateY(-1px); }
button:active { transform: translateY(0); }
button:disabled { background: #333; cursor: not-allowed; color: #666; transform: none; }
button.secondary { background: #333; color: #eee; border: 1px solid #444; }
button.secondary:hover { background: #444; border-color: #555; }

/* Icon Buttons */
.btn-remove { width: 24px; height: 24px; min-width: 24px; border-radius: 4px; display: inline-flex; align-items: center; justify-content: center; background: transparent; color: #666; border: 1px solid transparent; font-size: 18px; line-height: 1; padding: 0; margin: 0; cursor: pointer; transition: all 0.2s; }
.btn-remove:hover { background: var(--danger-bg); color: var(--danger); border-color: rgba(255, 85, 85, 0.3); transform: scale(1.1); }
.btn-small { width: auto; padding: 4px 10px; font-size: 0.8rem; }

/* Anim List */
#anim-list-container { flex: 1; background: #111; border: 1px solid var(--border); border-radius: 4px; overflow-y: auto; }
.anim-row { display: flex; align-items: center; padding: 10px 14px; border-bottom: 1px solid #222; cursor: pointer; font-size: 0.9rem; transition: background 0.15s; color: #ddd; }
.anim-row:hover { background: #222; color: #fff; }
.anim-row.active { background: #2a2a2a; border-left: 4px solid var(--accent); padding-left: 10px; color: #fff; }
.anim-row input[type="checkbox"] { margin-right: 12px; accent-color: var(--accent); cursor: pointer; width: 16px; height: 16px; }

/* Console */
#console { height: 150px; background: #0d0d0d; padding: 12px; font-family: 'Consolas', monospace; font-size: 0.85rem; color: #4ec9b0; overflow-y: auto; border-top: 1px solid var(--border); white-space: pre-wrap; line-height: 1.5; }

/* Overlay */
#overlay { position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); padding: 8px 16px; border-radius: 6px; pointer-events: none; font-weight: bold; color: white; border: 1px solid #444; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }

/* Part Map Table */
#partmap-wrapper { border: 1px solid var(--border); border-radius: 4px; height: 320px; overflow: auto; background: #111; }
#partmap-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
#partmap-table th { position: sticky; top: 0; background: #252525; z-index: 2; padding: 10px 8px; font-size: 0.8rem; color: #bbb; text-align: left; border-bottom: 1px solid #444; box-shadow: 0 2px 4px rgba(0,0,0,0.2); font-weight: 700; }
#partmap-table td { padding: 4px 8px; border-bottom: 1px solid #222; vertical-align: middle; }
#partmap-table tr:nth-child(even) { background: #161616; }
#partmap-table input { background: transparent; border: 1px solid transparent; font-size: 0.85rem; padding: 6px; color: #ddd; }
#partmap-table input:focus { background: #222; border-color: var(--accent); color: #fff; }
#partmap-table input:disabled { color: #666; font-style: italic; cursor: default; }

/* Flex helpers */
.row { display: flex; gap: 12px; margin-bottom: 12px; }
.col { flex: 1; }
.flex-between { display: flex; justify-content: space-between; align-items: center; }